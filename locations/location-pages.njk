---
pagination:
  data: locations.locations
  size: 1
  alias: location
permalink: "/locations/{{ location.id }}/"
layout: layouts/base.njk
eleventyComputed:
  title: "{{ location.name }}"
  meta:
    title: "{{ location.meta.title }}"
    description: "{{ location.meta.description }}"
  type: "location"
  name: "{{ location.name }}"
  address: "{{ location.address }}"
  coordinates: "{{ location.coordinates }}"
  priceRange: "{{ location.priceRange }}"
  images: "{{ location.images }}"
  breadcrumbs:
    - name: Locations
      url: /locations/
    - name: "{{ location.name }}"
      url: "/locations/{{ location.id }}/"
---

<article class="location-page">
  <header class="page-header">
    <div class="page-meta">
      {% if location.bookable %}
      <span class="badge badge-bookable">Bookable</span>
      {% endif %}
      <span class="badge badge-network">{{ location.category | replace("-", " ") | title }}</span>
    </div>
    <h1>{{ location.name }}</h1>
    <p>üìç {{ location.address }}</p>
    
    {% if location.priceRange %}
    <p style="font-size: 1.25rem; font-weight: 600; color: var(--color-primary);">
      ${{ location.priceRange.min | number }} - ${{ location.priceRange.max | number }} / {{ location.priceRange.unit }}
    </p>
    {% endif %}
  </header>

  {# Featured Shows #}
  {% if location.shows and location.shows.length > 0 %}
  <section>
    <h2>Featured On</h2>
    <ul class="show-list">
      {% for showId in location.shows %}
        {% for show in shows.shows %}
          {% if show.id == showId %}
          <li>
            <a href="/shows/{{ show.id }}/">{{ show.name }}</a>
            {% for featured in location.featuredSeasons %}
              {% if featured.show == showId %}
                <span class="text-muted">(Seasons {{ featured.seasons | join(", ") }})</span>
              {% endif %}
            {% endfor %}
          </li>
          {% endif %}
        {% endfor %}
      {% endfor %}
    </ul>
  </section>
  {% endif %}

  {# Booking CTA #}
  {% if location.bookable %}
  <section class="booking-cta">
    <h2>Book Your Stay</h2>
    {% if location.bookingUrl %}
    <a href="{{ location.bookingUrl }}" class="btn btn-primary" rel="nofollow sponsored" target="_blank">
      Check Availability
    </a>
    {% else %}
    <p>Booking link coming soon. Check back for availability.</p>
    {% endif %}
    {% if location.priceRange %}
    <p class="price-note">Starting at ${{ location.priceRange.min | number }}/{{ location.priceRange.unit }}</p>
    {% endif %}
  </section>
  {% endif %}

  {# Amenities #}
  {% if location.amenities and location.amenities.length > 0 %}
  <section>
    <h2>Amenities</h2>
    <ul class="amenity-list">
      {% for amenity in location.amenities %}
      <li>{{ amenity | replace("-", " ") | title }}</li>
      {% endfor %}
    </ul>
  </section>
  {% endif %}

  {# YouTube Videos #}
  {% if location.youtubeVideos and location.youtubeVideos.length > 0 %}
  <section style="margin-top: var(--spacing-xl);">
    <h2>Videos</h2>
    <div class="video-grid">
      {% for video in location.youtubeVideos %}
        {% set videoId = video.id %}
        {% set title = video.title %}
        {% set placeholder = video.placeholder %}
        {% include "components/youtube.njk" %}
      {% endfor %}
    </div>
  </section>
  {% endif %}

  {# Map Link #}
  {% if location.coordinates %}
  <section class="location-map">
    <h2>Location</h2>
    <a 
      href="https://www.google.com/maps/search/?api=1&query={{ location.coordinates.lat }},{{ location.coordinates.lng }}" 
      target="_blank"
      rel="noopener"
      class="map-link"
    >
      üìç View on Google Maps ‚Üí
    </a>
  </section>
  {% endif %}

  {# FAQs #}
  {% set faqs = location.faqs %}
  {% include "components/faq.njk" %}

  {# Nearby Attractions #}
  {% if location.nearbyAttractions and location.nearbyAttractions.length > 0 %}
  <section style="margin-top: var(--spacing-xl);">
    <h2>Nearby Attractions</h2>
    <ul>
      {% for nearbyId in location.nearbyAttractions %}
      <li><a href="/locations/{{ nearbyId }}/">{{ nearbyId | replace("-", " ") | title }}</a></li>
      {% endfor %}
    </ul>
  </section>
  {% endif %}
</article>
